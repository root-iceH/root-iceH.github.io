<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="&#34;auto&#34;"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://gitee.com/sec-pengyy/sec-pengyy/raw/master/img/favicon.png"><link rel="icon" type="image/png" href="https://gitee.com/sec-pengyy/sec-pengyy/raw/master/img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="description" content="没有天生的大牛，更没有永远的菜鸟求知若饥 , 虚心若愚"><meta name="author" content="iceH"><meta name="keywords" content=""><title>红队攻防学习之信息收集 - iceH’s Blog</title><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.1.2/styles/github-gist.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/css/gundongtiao.css# 滚动条颜色.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/css/shubiao.css# 鼠标指针.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/css/valine.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"www.secice.cn",root:"/",version:"1.8.5",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},copy_btn:!0,image_zoom:{enable:!0},lazyload:{enable:!0,onlypost:!1},web_analytics:{enable:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null}}}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="iceH’s Blog" type="application/atom+xml">
</head><body><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>iceH's Blog</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-books"></i> 博文</a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档 </a><a class="dropdown-item" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类 </a><a class="dropdown-item" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></div></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href="https://wiki.secice.cn/"><i class="iconfont icon-kaggle"></i> Wiki</a></li><li class="nav-item"><a class="nav-link" href="/playlist/"><i class="iconfont icon-music"></i> 音乐</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> 友链</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" href="javascript:">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner intro-2" id="background" parallax="true" style="background:url(https://gitee.com/sec-pengyy/sec-pengyy/raw/master/img/background1.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="红队攻防学习之信息收集"></span><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2020-12-15 16:49" pubdate>2020年12月15日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 5.3k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 70 分钟</span></div></div></div></div></div></header><main><div class="container-fluid"><div class="row"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-md"><div class="container nopadding-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">红队攻防学习之信息收集</h1><div class="markdown-body"><h1 id="一、信息收集"><a href="#一、信息收集" class="headerlink" title="一、信息收集"></a>一、信息收集</h1><h2 id="1、主机发现"><a href="#1、主机发现" class="headerlink" title="1、主机发现"></a>1、主机发现</h2><h3 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h3><p>官网: <a target="_blank" rel="noopener" href="https://nmap.org/">https://nmap.org/</a><br>安装系统及命令:</p><ul><li><p>Mac os: <code>brew install nmap</code></p></li><li><p>Centos: <code>yum install nmap</code></p></li><li><p>Ubuntu: <code>apt一get install nmap</code></p></li></ul><p>参考手册: <a target="_blank" rel="noopener" href="https://nmap.org/man/zh/index.html">https://nmap.org/man/zh/index.html</a></p><h4 id="扫描方式"><a href="#扫描方式" class="headerlink" title="扫描方式"></a><strong>扫描方式</strong></h4><p>常见的七种扫描方式：</p><ul><li><p>ТСР: -sT</p></li><li><p>SYN: -sS</p></li><li><p>ACK: -sA</p></li><li><p>UDP: -sU</p></li><li><p>RPC: -sR</p></li><li><p>ICMP: -sP</p></li><li><p>Disable Port Scan: -sn</p></li></ul><p>最常见的这些参数解释：<a target="_blank" rel="noopener" href="https://blog.csdn.net/liudongdong19/article/details/83506731">https://blog.csdn.net/liudongdong19/article/details/83506731</a></p><h4 id="常见扫描案例"><a href="#常见扫描案例" class="headerlink" title="常见扫描案例"></a><strong>常见扫描案例</strong></h4><ul><li>扫描10000端口、操作系统、版本</li></ul><pre><code class="hljs bash">nmap -T4 -A &lt;target&gt;</code></pre><ul><li>版本探测</li></ul><pre><code class="hljs bash">nmap -sV &lt;target&gt;</code></pre><ul><li>操作系统</li></ul><pre><code class="hljs bash">nmap -O &lt;target&gt;</code></pre><ul><li>其他常用技巧：</li></ul><pre><code class="hljs bash">--host-timeout 主机超时时间 通常选值：18000
--scan-delay 报文时间间隔 通常选值：1000
-s &lt;源地址&gt; 定义扫描源地址，为了不被发现</code></pre><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><pre><code class="hljs bash">nmap -V -iR 100000 -PO -p 80</code></pre><p>随机选择100000台主机扫描是否运行Web服务器（80端口）。由起始阶段发送探测报文来确定主机是否工作非常浪费时间，而且只需探测主机的一个端口，因此使用-PO禁止对主机列表。</p><pre><code class="hljs bash">host -l company.com | cut -d -f 4 | nmap -V -iL -</code></pre><p>进行DNS区域传输，以发现company.com中的主机，然后将IP地址提供给Nmap。上述命令用于GNU/Linux —— 其它系统进行区域传输时有不同的命令。</p><h4 id="输出"><a href="#输出" class="headerlink" title="输出"></a><strong>输出</strong></h4><pre><code class="hljs bash">-oN &lt;File&gt;
-oX &lt;XML File&gt;
-oG &lt;filespec&gt;</code></pre><p>Grep输出参考：<a target="_blank" rel="noopener" href="http://www.unspecific.com/nmap-oG-output/">http://www.unspecific.com/nmap-oG-output/</a></p><h3 id="Masscan"><a href="#Masscan" class="headerlink" title="Masscan"></a>Masscan</h3><p>项目地址: <a target="_blank" rel="noopener" href="https://github.com/robertdavidgraham/masscan">https://github.com/robertdavidgraham/masscan</a><br>安装:</p><pre><code class="hljs bash">$ sudo apt-get install git gcc make libpcap一dev
$ git <span class="hljs-built_in">clone</span> https://github.com/ rober tdavidgr aham/ masscan
$ <span class="hljs-built_in">cd</span> masscan
$ make</code></pre><blockquote><p>该工具兼容Nmap的参数高级选项</p></blockquote><h4 id="高级选项"><a href="#高级选项" class="headerlink" title="高级选项"></a><strong>高级选项</strong></h4><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/01.png" srcset="/img/loading.gif" alt="msscan"><br>命令：<code>sudo masscan --ports 1-10000 192.168.1.101 --adapter-ip 192.168.1.1</code></p><ul><li>-adapter-ip 指定发包的IP地址</li><li>-adapter-port 指定发包的源端口</li><li>-adapter-mac 指定发包的源MAC地址</li><li>-router-mac 指定网关的MAC地址</li><li>-exclude IP地址范围黑名单，防止masscan扫描</li><li>-excludefile 指定IP地址范围黑名单文件</li><li>-includefile，-iL 读取一个范围列表进行扫描</li><li>-wait 指定发送完包之后的等待时间，默认为10秒</li></ul><p>命令：<code>masscan -p 1-65535 192.168.1.101 --rate=100</code><br>在网络环境慢的情况下，快速扫描出存在端口与nmap配合</p><hr><h3 id="Nbtscan"><a href="#Nbtscan" class="headerlink" title="Nbtscan"></a>Nbtscan</h3><p>kali系统自带nbtscan，以及查看帮助说明</p><pre><code class="hljs bash">ice@iceH:~/Desktop$ whereis nbtscan
nbtscan: /usr/bin/nbtscan /usr/share/man/man1/nbtscan.1.gz
ice@iceH:~/Desktop$ nbtscan 

NBTscan version 1.6.
This is a free software and it comes with absolutely no warranty.
You can use, distribute and modify it under terms of GNU GPL 2+.

Usage:
nbtscan [-v] [-d] [-e] [-l] [-t timeout] [-b bandwidth] [-r] [-q] [-s separator] [-m retransmits] (-f filename)|(&lt;scan_range&gt;) 
......</code></pre><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a><strong>示例</strong></h4><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/02.png" srcset="/img/loading.gif" alt="nbtscan"><br>nbtscan扫描可以发现主机名、MAC addr等信息…</p><ul><li>扫描整个C段</li></ul><pre><code class="hljs bash">nbtscan -r 192.168.1.0/24</code></pre><ul><li>扫描一个范围</li></ul><pre><code class="hljs bash">nbtscan 192.168.1.1-100</code></pre><ul><li>以:分割显示结果</li></ul><pre><code class="hljs bash">nbtscan -v -s : 192.168.1.0/24</code></pre><ul><li>从文件读取扫描范围</li></ul><pre><code class="hljs bash">nbtscan -f &lt;File&gt;</code></pre><h4 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a><strong>高级用法</strong></h4><pre><code class="hljs bash">sudo nbtscan -v -s <span class="hljs-string">&#x27; &#x27;</span> 192.168.1.105
sudo nbtscan -v -s <span class="hljs-string">&#x27; &#x27;</span> 192.168.1.105 | awk <span class="hljs-string">&#x27;&#123;print $1&#125;&#x27;</span> | uniq</code></pre><pre><code class="hljs bash">ice@iceH:~/Desktop$ sudo nbtscan -v -s <span class="hljs-string">&#x27; &#x27;</span> 192.168.1.105
192.168.1.105 GOOGLE-28D12ECA 00U
192.168.1.105 GOOGLE-28D12ECA 20U
192.168.1.105 WORKGROUP       00G
192.168.1.105 WORKGROUP       1eG
192.168.1.105 WORKGROUP       1dU
192.168.1.105 __MSBROWSE__ 01G
192.168.1.105 MAC 00:0c:29:f5:84:34
ice@iceH:~/Desktop$ sudo nbtscan -v -s <span class="hljs-string">&#x27; &#x27;</span> 192.168.1.105 | awk <span class="hljs-string">&#x27;&#123;print $1&#125;&#x27;</span> | uniq
192.168.1.105</code></pre><hr><h3 id="hping3"><a href="#hping3" class="headerlink" title="hping3"></a>hping3</h3><p>hping3主要测试防火墙的拦截规则，对网络设备进行测试</p><h4 id="常用模式"><a href="#常用模式" class="headerlink" title="常用模式"></a><strong>常用模式</strong></h4><ul><li>-0 -rawip IP原始报文</li><li>-1 -icmp ICMP模式</li><li>-2 -udp UDP模式</li><li>-8 -scan 扫描模式</li><li>-9 -listen 监听模式</li></ul><blockquote><p>SYN方式扫描主机端口</p></blockquote><pre><code class="hljs bash">hping3 --scan 445,135 -S 192.168.1.105</code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/03.png" srcset="/img/loading.gif" alt="hping3"></p><p>可以看到，目标主机回复了: S…A，代表SYN/ACK</p><blockquote><p>测试防火墙对ICMP包的反应、是否支持traceroute、是否开放某个端口、对防火墙进行拒绝服务攻击（DoS attack）。例如，以LandAttack方式测试目标防火墙（Land Attack是将发送源地址设置为与目标地址相同，诱使目标机与自己不停地建立连接）</p></blockquote><pre><code class="hljs bash">hping3 -S -a 114.114.114.114 -p 53 114.114.114.114 -c 5</code></pre><h4 id="DRDDOS"><a href="#DRDDOS" class="headerlink" title="DRDDOS"></a><strong>DRDDOS</strong></h4><blockquote><p>基于UDP的DOS</p></blockquote><pre><code class="hljs bash">hping3 -udp -a 114.114.114.114 -p 53 114.114.114.114 -c 5</code></pre><p><strong>参考</strong></p><p><a target="_blank" rel="noopener" href="http://0daysecurity.com/articles/hping3_examples.html">http://0daysecurity.com/articles/hping3_examples.html</a> –很详细用法的解释<br><a target="_blank" rel="noopener" href="http://man.linuxde.net/hping3">http://man.linuxde.net/hping3</a></p><hr><h2 id="2、关联信息生成"><a href="#2、关联信息生成" class="headerlink" title="2、关联信息生成"></a>2、关联信息生成</h2><p>在渗透前期工作开展之前，需要对目标的各种信息进行分析、拆分、组合<br>例如:赫尔巴斯亚基国<br>根据地域习惯、宗教、互联网开放信息等信息进行简要拆分，假设获取的信息如下:</p><ul><li>当地人爱好吃橙子</li><li>当地人信奉伊斯兰教</li><li>IPV4地址开放IP段</li><li>相关社交网络公 开的数据库</li></ul><p>根据宗教、习惯、IP地址、 开放数据支持…等，为后续的字典生成、鱼叉、水坑攻击铺下基石</p><h3 id="字典生成：pydictor"><a href="#字典生成：pydictor" class="headerlink" title="字典生成：pydictor"></a>字典生成：pydictor</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装:"></a><strong>安装:</strong></h4><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/LandGrey/pydictor</code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/04.png" srcset="/img/loading.gif" alt="安装"></p><h4 id="生成字典"><a href="#生成字典" class="headerlink" title="生成字典"></a>生成字典</h4><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/05.png" srcset="/img/loading.gif" alt="生成字典"></p><p>命令：<code>python pydictor.py --sedb</code></p><pre><code class="hljs bash">python pydictor.py --sedb
<span class="hljs-built_in">set</span> cname liwei
<span class="hljs-built_in">set</span> sname lw Lwei
<span class="hljs-built_in">set</span> ename zwell
<span class="hljs-built_in">set</span> birth 19880916
<span class="hljs-built_in">set</span> usedpwd liwei123456. liwei@19880916 lw19880916_123
<span class="hljs-built_in">set</span> phone 18852006666
<span class="hljs-built_in">set</span> uphone 15500998080
<span class="hljs-built_in">set</span> hphone 76500100 61599000 01061599000
<span class="hljs-built_in">set</span> email 33125500@qq.com
<span class="hljs-built_in">set</span> email 13561207878@163.com
<span class="hljs-built_in">set</span> email weiweili@gmail.com
<span class="hljs-built_in">set</span> email wei010wei@hotmail.com
<span class="hljs-built_in">set</span> postcode 663321 962210
<span class="hljs-built_in">set</span> nickname zlili
<span class="hljs-built_in">set</span> idcard 152726198809160571
<span class="hljs-built_in">set</span> jobnum 20051230 100563
<span class="hljs-built_in">set</span> otherdate 19591004 19621012
<span class="hljs-built_in">set</span> otherdate 19870906 19880208
<span class="hljs-built_in">set</span> usedchar tiger gof gamesthrones 176003 m0n5ter ppdog
run</code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/06.png" srcset="/img/loading.gif" alt="生成字典"></p><h4 id="合并去重"><a href="#合并去重" class="headerlink" title="合并去重"></a><strong>合并去重</strong></h4><pre><code class="hljs bash">python pydictor.py -tool uniqbiner /my/all/dict/</code></pre><h4 id="多字典文件组合工具"><a href="#多字典文件组合工具" class="headerlink" title="多字典文件组合工具"></a><strong>多字典文件组合工具</strong></h4><pre><code class="hljs bash">python pydictor.py -tool hybrider heads.txt some_others.txt tails.txt</code></pre><p>参考详细：<a target="_blank" rel="noopener" href="https://github.com/LandGrey/pydictor/blob/master/docs/doc/usage.md">https://github.com/LandGrey/pydictor/blob/master/docs/doc/usage.md</a></p><hr><h2 id="3、开放漏洞情报"><a href="#3、开放漏洞情报" class="headerlink" title="3、开放漏洞情报"></a>3、开放漏洞情报</h2><h3 id="常用网站"><a href="#常用网站" class="headerlink" title="常用网站"></a>常用网站</h3><ul><li>CVE：<a target="_blank" rel="noopener" href="https://cve.mitre.org/">https://cve.mitre.org/</a></li><li>Exploit-DB：<a target="_blank" rel="noopener" href="https://www.exploit-db.com/">https://www.exploit-db.com/</a></li><li>CX Security：<a target="_blank" rel="noopener" href="https://cxsecurity.com/">https://cxsecurity.com/</a></li><li>CNVD：<a target="_blank" rel="noopener" href="https://www.cnvd.org.cn/">https://www.cnvd.org.cn/</a></li><li>securitytracker：<a target="_blank" rel="noopener" href="https://www.securitytracker.com/">https://www.securitytracker.com/</a></li></ul><h3 id="Search-Exploit一DB"><a href="#Search-Exploit一DB" class="headerlink" title="Search Exploit一DB"></a>Search Exploit一DB</h3><h4 id="搜索漏洞"><a href="#搜索漏洞" class="headerlink" title="搜索漏洞"></a>搜索漏洞</h4><p>利用 <code>searchsploit apache 5.3.12</code> ，搜索apache漏洞</p><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/07.png" srcset="/img/loading.gif" alt="搜索漏洞"></p><h4 id="更新最新exp库"><a href="#更新最新exp库" class="headerlink" title="更新最新exp库"></a>更新最新exp库</h4><p>命令：<code>searchsploit -u</code><br><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/08.png" srcset="/img/loading.gif" alt="更新最新exp库"></p><hr><h2 id="4、开源情报信息搜集-OSINT"><a href="#4、开源情报信息搜集-OSINT" class="headerlink" title="4、开源情报信息搜集(OSINT)"></a>4、开源情报信息搜集(OSINT)</h2><h3 id="搜索引擎语法"><a href="#搜索引擎语法" class="headerlink" title="搜索引擎语法"></a>搜索引擎语法</h3><ul><li>百度：<a target="_blank" rel="noopener" href="https://www.baidu.com/">https://www.baidu.com</a></li><li>谷歌：<a target="_blank" rel="noopener" href="https://www.google.com/">https://www.google.com</a></li><li>必应：<a target="_blank" rel="noopener" href="https://cn.bing.com/">https://cn.bing.com</a></li></ul><h3 id="在线接口"><a href="#在线接口" class="headerlink" title="在线接口"></a>在线接口</h3><ul><li><a target="_blank" rel="noopener" href="http://ce.baidu.com/index/getrelatedsites?site_address=baidu.com">http://ce.baidu.com/index/getrelatedsites?site_address=baidu.com</a></li><li><a target="_blank" rel="noopener" href="http://www.webscan.cc/">http://www.webscan.cc/</a></li><li><a target="_blank" rel="noopener" href="http://sbd.ximcx.cn/">http://sbd.ximcx.cn/</a> –在线子域名查询-接口光速版</li><li><a target="_blank" rel="noopener" href="https://censys.io/certificates?q=.example.com">https://censys.io/certificates?q=.example.com</a></li><li><a target="_blank" rel="noopener" href="https://crt.sh/?q=%25.example.com">https://crt.sh/?q=%25.example.com</a></li><li><a target="_blank" rel="noopener" href="https://github.com/c0ny1/workscripts/tree/master/get-subdomain-from-baidu">https://github.com/c0ny1/workscripts/tree/master/get-subdomain-from-baidu</a></li><li><a target="_blank" rel="noopener" href="https://dnsdumpster.com/">https://dnsdumpster.com/</a> –查询DNS记录、侦查、研究</li><li><a target="_blank" rel="noopener" href="https://www.threatcrowd.org/searchApi/v2/domain/report/?domain=baidu.com">https://www.threatcrowd.org/searchApi/v2/domain/report/?domain=baidu.com</a> –和第一个一样</li><li><a target="_blank" rel="noopener" href="https://findsubdomains.com/">https://findsubdomains.com/</a></li><li><a target="_blank" rel="noopener" href="https://dnslytics.com/search?g=www.baidu.com">https://dnslytics.com/search?g=www.baidu.com</a> –DNSlyrics</li><li><a target="_blank" rel="noopener" href="https://pentest-tools.com/information-gathering/find-subdomains-of-domain">https://pentest-tools.com/information-gathering/find-subdomains-of-domain</a> –DNS攻击面2次免费</li><li><a target="_blank" rel="noopener" href="https://viewdns.info/">https://viewdns.info/</a> –功能很多</li><li><a target="_blank" rel="noopener" href="https://www.ipneighbour.com/#/lookup/114.114.114.114">https://www.ipneighbour.com/#/lookup/114.114.114.114</a> –邻居发现</li><li><a target="_blank" rel="noopener" href="https://securitytrails.com/list/apex_domain/baidu.com">https://securitytrails.com/list/apex_domain/baidu.com</a></li><li><a target="_blank" rel="noopener" href="https://url.fht.im/">https://url.fht.im/</a></li><li><a target="_blank" rel="noopener" href="http://api.hackertarget.com/hostsearch/?q=baidu.com">http://api.hackertarget.com/hostsearch/?q=baidu.com</a></li><li><a target="_blank" rel="noopener" href="http://www.yunsee.cn/finger.html">http://www.yunsee.cn/finger.html</a> –云悉（限制挺大）</li></ul><p>有几个挺好用的，自行挖掘…</p><h3 id="相关工具"><a href="#相关工具" class="headerlink" title="相关工具"></a>相关工具</h3><ul><li><a target="_blank" rel="noopener" href="https://github.com/rshipp/awesome-malware-analysis/blob/master/%E6%81%B6%E6%84%8F%E8%BD%AF%E4%BB%B6%E5%88%86%E6%9E%90%E5%A4%A7%E5%90%88%E9%9B%86.md">https://github.com/rshipp/awesome-malware-analysis/blob/master/恶意软件分析大合集.md</a></li></ul><p>此网站极力推荐学习！！！</p><hr><h2 id="5、Github-Hacking"><a href="#5、Github-Hacking" class="headerlink" title="5、Github Hacking"></a>5、Github Hacking</h2><p>您可以在所有公共GitHub存储库中搜索以下类型的信息，以及您有权访问的所有私有Github存储库</p><ul><li>Repositories</li><li>Topics</li><li>Issues and pull requests</li><li>Code</li><li>Commits</li><li>Users</li><li>Wikis</li></ul><p>参考 :</p><ul><li>Searching for repositories</li><li>Searching topics</li><li>Searching code</li><li>Searching commits</li><li>Searching issues and pull requests</li><li>Searching users</li><li>Searching wikis</li><li>Searching in forks</li></ul><p>可以使用以上方式<code>搜索</code>页面或<code>高级搜索</code>页面搜索Github<br>您可以使用<code>&gt;</code>，<code>&gt;=</code>，<code>&lt;</code>，和<code>&lt;=</code>搜索是<code>大于</code>，<code>大于或等于</code>，<code>小于</code>和<code>小于或等于</code>另一个值的值<br>下面会介绍如何搜索</p><h3 id="搜索仓库"><a href="#搜索仓库" class="headerlink" title="搜索仓库"></a><strong>搜索仓库</strong></h3><table><thead><tr><th align="center">Query</th><th align="center">Example</th></tr></thead><tbody><tr><td align="center">&gt;_n</td><td align="center">cats stars:&gt;1000匹配关键字”cats”且star大于1000的仓库</td></tr><tr><td align="center">&gt;=<em>n</em></td><td align="center">cats topIcs:&gt;=5匹配关键字”cats”且标签数量大于等于5的仓库</td></tr><tr><td align="center">&lt;_n_</td><td align="center">cats size:&lt;10000匹配关键字”cats”且文件小于10KB的仓库</td></tr><tr><td align="center">&lt;=_n_</td><td align="center">cats stars:&lt;=50匹配关键字”cats”且star小于等于50的仓库</td></tr><tr><td align="center">_n_..*</td><td align="center">cats stars:10..*匹配关键字”cats”且star大于等于10的仓库</td></tr><tr><td align="center">*.._n_</td><td align="center">cats stars:*..10匹配关键字”cats”且star小于等于10的仓库</td></tr><tr><td align="center">n..n</td><td align="center">cats stars:10..50匹配关键字”cats”且star大于10且小于50的仓库</td></tr></tbody></table><h3 id="搜索代码"><a href="#搜索代码" class="headerlink" title="搜索代码"></a>搜索代码</h3><p><strong>注意事项</strong></p><ul><li>只能搜索小于384KB的文件</li><li>只能搜索少于500,000个文件的存储库，登录的用户可以搜索所有公共存储库</li><li>除filename搜索外，搜索源代码时必须至少包含一个搜索词。例如，搜索language: Javascript无效,而是这样: amazing language:Javascript</li><li>搜索结果最多可以显示来自同一文件的两个片段，但文件中可能会有更多结果。您不能将以下通配符用作搜索查询的一部分“.、! “ = * ! ? # $ &amp; + ^ | ~ &lt; &gt; ( ) { } [ ] 搜索将忽略这些符号</li></ul><p><strong>日期条件</strong></p><ul><li>cats pushed:&lt;2012-07-05 搜索在2012年07月05日前push代码，且cats作为关键字</li><li>cats pushed:2016-04-30..2016-07-04 日期区间</li><li>cats created:&gt;=2017-04-01 创建时间</li></ul><p><strong>逻辑运算</strong></p><ul><li>AND、OR、NOT</li></ul><p><strong>排除运算</strong></p><ul><li>cats pushed:&lt;2012-07-05 language:java 搜索在2012年07月05日前push代码，且cats作为关键字，排除java语言仓库</li></ul><p><strong>包含搜索</strong></p><ul><li>cats in:file 搜索文件中包含cats的代码<ul><li>cats in:path 搜索路径中包含cats的代码<ul><li>cats in:path,file搜索路径、文件中包含cats的代码</li></ul></li></ul></li><li>console path:app/public language:javascript 搜索关键字 console，且语言为javascript，在app/public下的代码</li></ul><p><strong>主体搜索</strong></p><ul><li>user: USERNAME 用户名搜索<ul><li>org: ‘’ORGNAME 组织搜索<ul><li>repo: USERNAME/REPOSITORY指定仓库搜索</li></ul></li></ul></li></ul><p><strong>文件大小</strong></p><ul><li>size:&gt;1000 搜索大小大于1KB的文件</li></ul><p><strong>文件名称</strong></p><p><code>filename:config.php language:php</code> 搜索文件名为<code>config.php</code>，且语言为<code>php</code>的代码<br><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/09.png" srcset="/img/loading.gif" alt="github hacking"></p><p>搜索Java项目配置文件: <code>mail filename:.properties</code><br><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/10.png" srcset="/img/loading.gif" alt="github hacking"></p><p><strong>扩展名</strong></p><p>搜索<code>extension:yaml mongolab.com</code> 中存在的代码信息等<br><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/11.png" srcset="/img/loading.gif" alt="github hacking"></p><h3 id="自动化工具"><a href="#自动化工具" class="headerlink" title="自动化工具"></a>自动化工具</h3><p><code>https://github.com/unkl4b/gitmIner</code></p><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/12.png" srcset="/img/loading.gif" alt="自动化工具"></p><hr><h2 id="6、google-hacking"><a href="#6、google-hacking" class="headerlink" title="6、google hacking"></a>6、google hacking</h2><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/13.png" srcset="/img/loading.gif" alt="google hacking"></p><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a><strong>用法</strong></h3><ul><li>Intitle 包含标题<ul><li>Intext 包含内容<ul><li>filetype 文件类型<ul><li>Info 基本信息<ul><li>site 指定网站</li><li>inurl 包含某个url</li><li>link 包含指定链接的网页</li><li>cache 显示页面的缓存版本</li></ul></li><li>numberange搜索一个数字</li></ul></li></ul></li></ul></li></ul><h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a><strong>示例</strong></h3><ul><li>搜索目标包含后台的页面</li></ul><p>命令：<code>inurl:/admin intext: 后台管理系统</code></p><p><code>site:&quot;some-keywords.com&quot;intitle: login intext: intext: 管理|后台|登陆|用户名|密码|验证码|系统|帐号| manage|admin|login|system</code></p><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/14.png" srcset="/img/loading.gif" alt="google hacking"></p><ul><li>搜索目标是否有目录列表</li></ul><p>命令：<code>intext: index of / | ../ | Parent Directory</code></p><p><code>site:&quot;some-keywords.com&quot; intext: index of / | ../ | Parent Directory</code></p><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/15.png" srcset="/img/loading.gif" alt="google hacking"></p><p>可看到存在目录列表很多url</p><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/16.png" srcset="/img/loading.gif" alt="google hacking"></p><hr><h2 id="7、Git-all-secret"><a href="#7、Git-all-secret" class="headerlink" title="7、Git-all-secret"></a>7、Git-all-secret</h2><p>略过这个，等有精力再研究</p><hr><h2 id="8、mailsniper-ps1获取outlook所有联系人"><a href="#8、mailsniper-ps1获取outlook所有联系人" class="headerlink" title="8、mailsniper.ps1获取outlook所有联系人"></a>8、mailsniper.ps1获取outlook所有联系人</h2><h3 id="条件"><a href="#条件" class="headerlink" title="条件"></a><strong>条件</strong></h3><p>掌握其中一个用户邮箱的账号密码，并且可以登录outlook<br>outlook地址可以是官方的也可以是目标自己搭建的，并无影响</p><h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a><strong>目的</strong></h3><p>获取目标邮箱里的所有联系人，方便后续爆破弱口令等等</p><h3 id="利用"><a href="#利用" class="headerlink" title="利用"></a><strong>利用</strong></h3><h4 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h4><p>将尝试 <code>Outlook Web Access（OWA）</code>和<code>Exchange Web服务（EWS）</code>的方法。此命令可用于从Exchange收集电子邮件列表 ：</p><pre><code class="hljs powershell"><span class="hljs-built_in">Get-GlobalAddressList</span> <span class="hljs-literal">-ExchHostname</span> <span class="hljs-string">&quot;outlook地址&quot;</span> <span class="hljs-literal">-UserName</span> <span class="hljs-string">&quot;域名/域用户名&quot;</span> <span class="hljs-literal">-Password</span> <span class="hljs-string">&quot;密码&quot;</span> <span class="hljs-literal">-OutFile</span> global<span class="hljs-literal">-address</span><span class="hljs-literal">-list</span>.txt</code></pre><h4 id="可以自己搭建目标outlook在自己服务器上"><a href="#可以自己搭建目标outlook在自己服务器上" class="headerlink" title="可以自己搭建目标outlook在自己服务器上"></a><strong>可以自己搭建目标outlook在自己服务器上</strong></h4><p>此处使用klion的域环境模拟<br>在<code>mailsniper. ps1</code>最后一行加入以下代码,也可以通过传参的形式调用</p><pre><code class="hljs powershell"><span class="hljs-built_in">Get-GlobalAddressList</span> <span class="hljs-literal">-ExchHostname</span> mail.domain.com <span class="hljs-literal">-UserName</span> domain\username <span class="hljs-literal">-Password</span> Fall2016 <span class="hljs-literal">-OutFile</span> global<span class="hljs-literal">-address</span><span class="hljs-literal">-list</span>.txt</code></pre><p>尝试使用我们传递的账号密码去登录目标的outlook，成功登录后会把邮件里的联系人都获取下来，并输出保存到文件里</p><h4 id="目标outlook在Office365"><a href="#目标outlook在Office365" class="headerlink" title="目标outlook在Office365"></a>目标outlook在Office365</h4><p>道理也是一样的，把<code>ExchHostname</code>指向<code>outlook.office365.com</code>即可，username使用完整的邮箱不要是用户名即可</p><pre><code class="hljs css"><span class="hljs-selector-tag">Get-GlobalAddressList</span> <span class="hljs-selector-tag">-ExchHostname</span> <span class="hljs-selector-tag">outlook</span><span class="hljs-selector-class">.office365</span><span class="hljs-selector-class">.com</span> <span class="hljs-selector-tag">-Username</span> 用户名@邮箱.....</code></pre><h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a><strong>参考链接</strong></h3><ul><li><a target="_blank" rel="noopener" href="https://www.blackhillsinfosec.com/abusing-exchange-mailbox-permissions-mailsniper/">https://www.blackhillsinfosec.com/abusing-exchange-mailbox-permissions-mailsniper/</a></li><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/backlion/p/6812690.html">https://www.cnblogs.com/backlion/p/6812690.html</a></li></ul><h3 id="工具地址"><a href="#工具地址" class="headerlink" title="工具地址"></a><strong>工具地址</strong></h3><p><code>https://github.com/dafthack/mailsniper</code></p><hr><h2 id="9、内网渗透之信息收集"><a href="#9、内网渗透之信息收集" class="headerlink" title="9、内网渗透之信息收集"></a>9、内网渗透之信息收集</h2><h3 id="Windows（工作组和域）"><a href="#Windows（工作组和域）" class="headerlink" title="Windows（工作组和域）"></a>Windows（工作组和域）</h3><h4 id="检查当前shell权限"><a href="#检查当前shell权限" class="headerlink" title="检查当前shell权限"></a><strong>检查当前shell权限</strong></h4><pre><code class="hljs powershell">whoami /user &amp; whoami /priv</code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/17.png" srcset="/img/loading.gif" alt="检查当前shell权限"></p><h4 id="查看系统信息"><a href="#查看系统信息" class="headerlink" title="查看系统信息"></a><strong>查看系统信息</strong></h4><p>收集信息主机名-&gt;扮演角色</p><pre><code class="hljs powershell">systeminfo

主机名:           WIN<span class="hljs-literal">-2008</span>
OS 名称:          Microsoft Windows Server <span class="hljs-number">2008</span> R2 Standard
OS 版本:          <span class="hljs-number">6.1</span>.<span class="hljs-number">7601</span> Service Pack <span class="hljs-number">1</span> Build <span class="hljs-number">7601</span>
OS 制造商:        Microsoft Corporation
OS 配置:          成员服务器
OS 构件类型:      Multiprocessor Free
注册的所有人:     Windows 用户
注册的组织:
产品 ID:          <span class="hljs-number">55041</span><span class="hljs-literal">-628</span><span class="hljs-literal">-5044404</span><span class="hljs-literal">-84151</span>
初始安装日期:     <span class="hljs-number">2020</span>/<span class="hljs-number">10</span>/<span class="hljs-number">14</span>, <span class="hljs-number">14</span>:<span class="hljs-number">31</span>:<span class="hljs-number">07</span>
系统启动时间:     <span class="hljs-number">2020</span>/<span class="hljs-number">11</span>/<span class="hljs-number">19</span>, <span class="hljs-number">18</span>:<span class="hljs-number">02</span>:<span class="hljs-number">28</span>
系统制造商:       VMware, Inc.
系统型号:         VMware Virtual Platform
系统类型:         x64<span class="hljs-literal">-based</span> PC
处理器:           安装了 <span class="hljs-number">1</span> 个处理器。
                  [<span class="hljs-number">01</span>]: Intel64 Family <span class="hljs-number">6</span> Model <span class="hljs-number">142</span> Stepping <span class="hljs-number">10</span> GenuineIntel ~<span class="hljs-number">1992</span> Mhz
BIOS 版本:        Phoenix Technologies LTD <span class="hljs-number">6.00</span>, <span class="hljs-number">2020</span>/<span class="hljs-number">2</span>/<span class="hljs-number">27</span>
Windows 目录:     C:\Windows
系统目录:         C:\Windows\system32
启动设备:         \Device\HarddiskVolume1
系统区域设置:     zh<span class="hljs-literal">-cn</span>;中文(中国)
输入法区域设置:   zh<span class="hljs-literal">-cn</span>;中文(中国)
时区:             (UTC+<span class="hljs-number">08</span>:<span class="hljs-number">00</span>)北京，重庆，香港特别行政区，乌鲁木齐
物理内存总量:     <span class="hljs-number">2</span>,<span class="hljs-number">047</span> MB
可用的物理内存:   <span class="hljs-number">1</span>,<span class="hljs-number">529</span> MB
虚拟内存: 最大值: <span class="hljs-number">4</span>,<span class="hljs-number">095</span> MB
虚拟内存: 可用:   <span class="hljs-number">3</span>,<span class="hljs-number">562</span> MB
虚拟内存: 使用中: <span class="hljs-number">533</span> MB
页面文件位置:     C:\pagefile.sys
域:               secice.cn
登录服务器:       \\WIN<span class="hljs-literal">-2008</span>
修补程序:         安装了 <span class="hljs-number">2</span> 个修补程序。
                  [<span class="hljs-number">01</span>]: KB2999226
                  [<span class="hljs-number">02</span>]: KB976902
网卡:             安装了 <span class="hljs-number">2</span> 个 NIC。
                  [<span class="hljs-number">01</span>]: Intel(<span class="hljs-built_in">R</span>) PRO/<span class="hljs-number">1000</span> MT Network Connection
                      连接名:      本地连接
                      启用 DHCP:   否
                      IP 地址
                        [<span class="hljs-number">01</span>]: <span class="hljs-number">192.168</span>.<span class="hljs-number">3.101</span>
                        [<span class="hljs-number">02</span>]: fe80::<span class="hljs-number">15</span>a9:e224:<span class="hljs-number">1</span>f9b:<span class="hljs-number">336</span>
                  [<span class="hljs-number">02</span>]: Intel(<span class="hljs-built_in">R</span>) PRO/<span class="hljs-number">1000</span> MT Network Connection
                      连接名:      本地连接 <span class="hljs-number">2</span>
                      启用 DHCP:   是
                      DHCP 服务器: <span class="hljs-number">192.168</span>.<span class="hljs-number">126.254</span>
                      IP 地址
                        [<span class="hljs-number">01</span>]: <span class="hljs-number">192.168</span>.<span class="hljs-number">126.175</span>
                        [<span class="hljs-number">02</span>]: fe80::d1cb:<span class="hljs-number">2</span>aa2:fe1f:d647</code></pre><h4 id="Tcp-udp-网络连接状态信息"><a href="#Tcp-udp-网络连接状态信息" class="headerlink" title="Tcp/udp 网络连接状态信息"></a><strong>Tcp/udp 网络连接状态信息</strong></h4><p>可以获取内网IP分布状态-服务（redis)</p><pre><code class="hljs powershell">netstat <span class="hljs-literal">-ano</span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/18.png" srcset="/img/loading.gif" alt="Tcp/udp 网络连接状态信息"></p><h4 id="查看机器名"><a href="#查看机器名" class="headerlink" title="查看机器名"></a><strong>查看机器名</strong></h4><pre><code class="hljs powershell">hostname</code></pre><h4 id="查看当前操作系统"><a href="#查看当前操作系统" class="headerlink" title="查看当前操作系统"></a><strong>查看当前操作系统</strong></h4><pre><code class="hljs pgsql">wmic OS <span class="hljs-keyword">get</span> Caption,CSDVersion,OSArchitecture,<span class="hljs-keyword">Version</span> 
ver</code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/19.png" srcset="/img/loading.gif" alt="查看当前操作系统"></p><h4 id="查看当前安装的程序"><a href="#查看当前安装的程序" class="headerlink" title="查看当前安装的程序"></a><strong>查看当前安装的程序</strong></h4><pre><code class="hljs applescript">wmic product <span class="hljs-keyword">get</span> <span class="hljs-built_in">name</span>,<span class="hljs-built_in">version</span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/20.png" srcset="/img/loading.gif" alt="查看当前安装的程序"></p><h4 id="查看在线用户"><a href="#查看在线用户" class="headerlink" title="查看在线用户"></a><strong>查看在线用户</strong></h4><pre><code class="hljs ebnf"><span class="hljs-attribute">quser</span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/21.png" srcset="/img/loading.gif" alt="查看在线用户"></p><h4 id="查看网络配置"><a href="#查看网络配置" class="headerlink" title="查看网络配置"></a><strong>查看网络配置</strong></h4><p>有 Primary Dns Suff就说明是域内，空的则当前机器应该在工作组</p><pre><code class="hljs ada">ipconfig /<span class="hljs-keyword">all</span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/22.png" srcset="/img/loading.gif" alt="查看网络配置"></p><h4 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a><strong>查看进程</strong></h4><p>有些进程可能是域用户启的-&gt;通过管理员权限凭证窃取-&gt;窃取域用户的凭证</p><pre><code class="hljs jboss-cli">tasklist <span class="hljs-string">/v</span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/23.png" srcset="/img/loading.gif" alt="查看进程"></p><h4 id="查看当前登陆域"><a href="#查看当前登陆域" class="headerlink" title="查看当前登陆域"></a><strong>查看当前登陆域</strong></h4><pre><code class="hljs arduino">net <span class="hljs-built_in">config</span> workstation</code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/24.png" srcset="/img/loading.gif" alt="查看当前登陆域"></p><h4 id="远程桌面链接历史记录"><a href="#远程桌面链接历史记录" class="headerlink" title="远程桌面链接历史记录"></a><strong>远程桌面链接历史记录</strong></h4><p>可以把凭证取下来-&gt;本地解密</p><pre><code class="hljs jboss-cli">cmdkey <span class="hljs-string">/l</span></code></pre><h4 id="查看本机上的用户账户列表"><a href="#查看本机上的用户账户列表" class="headerlink" title="查看本机上的用户账户列表"></a><strong>查看本机上的用户账户列表</strong></h4><pre><code class="hljs crmsh">net <span class="hljs-keyword">user</span> <span class="hljs-title"></span></code></pre><h4 id="查看本机用户xxx的信息"><a href="#查看本机用户xxx的信息" class="headerlink" title="查看本机用户xxx的信息"></a><strong>查看本机用户xxx的信息</strong></h4><pre><code class="hljs crmsh">net <span class="hljs-keyword">user</span> <span class="hljs-title">xxx</span></code></pre><h4 id="查看本机用户xxx的信息-1"><a href="#查看本机用户xxx的信息-1" class="headerlink" title="查看本机用户xxx的信息"></a><strong>查看本机用户xxx的信息</strong></h4><pre><code class="hljs crmsh">net <span class="hljs-keyword">user</span> <span class="hljs-title">/domain</span> 				显示所在域的用户名单
net <span class="hljs-keyword">user</span> <span class="hljs-title">域用户 /domain</span>			获取某个域用户的详细信息 
net <span class="hljs-keyword">user</span> <span class="hljs-title">/domain</span> xxx <span class="hljs-number">12345678</span> 	修改域用户密码，需要域管理员权限</code></pre><hr><h3 id="Windows（域）"><a href="#Windows（域）" class="headerlink" title="Windows（域）"></a>Windows（域）</h3><pre><code class="hljs powershell">nltest /domain_trusts /all_trusts /v /server:<span class="hljs-number">192.168</span>.<span class="hljs-number">126.175</span>    返回所有信任域列表
nltest /dsgetdc:secice /server:<span class="hljs-number">192.168</span>.<span class="hljs-number">3.101</span>    				   返回域控和其相应的IP地
net user /<span class="hljs-keyword">do</span> 												   获取域用户列表
net <span class="hljs-built_in">group</span> /domain											查看域里面的组。
net <span class="hljs-built_in">group</span> <span class="hljs-string">&quot;domain computers&quot;</span> /domain						查看域内所有的主机计算机名。
net <span class="hljs-built_in">group</span> <span class="hljs-string">&quot;domain admins&quot;</span> /domain								查看域管理员。
net <span class="hljs-built_in">group</span> <span class="hljs-string">&quot;domain controllers&quot;</span> /domain							查看域控制器。
net <span class="hljs-built_in">group</span> <span class="hljs-string">&quot;enterprise admins&quot;</span> /domain							查看企业管理组。
net localgroup administrators								   本机管理员[通常含有域用户]
net localgroup administrators /domain 						   登录本机的域管理员 
net localgroup administrators workgroup\user001 /add 		   域用户添加到本机</code></pre><pre><code class="hljs powershell">net view 				查看同一域内机器列表 
net view \\ip			查看某IP共享
net view \\GHQ		    查看GHQ计算机的共享资源列表 
net view /domain		查看内网存在多少个域 
net view /domain:XYZ	查看XYZ域中的机器列表 
net accounts /domain	查询域用户密码过期等信息
net time/domain			查看时间服务器。</code></pre><p>定位域控IP</p><pre><code class="hljs powershell"><span class="hljs-number">1</span>)ipconfig /all	通常域内主机 DNS 地址就是域控地址
<span class="hljs-number">2</span>)查看开启 <span class="hljs-number">53</span>，<span class="hljs-number">389</span> 等端口的主机
<span class="hljs-number">3</span>)net time /domain &amp;&amp; ping DC.secice.cn</code></pre><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><h4 id="查看当前权限"><a href="#查看当前权限" class="headerlink" title="查看当前权限"></a><strong>查看当前权限</strong></h4><pre><code class="hljs ebnf"><span class="hljs-attribute">whoami</span></code></pre><h4 id="查看网卡配置"><a href="#查看网卡配置" class="headerlink" title="查看网卡配置"></a><strong>查看网卡配置</strong></h4><pre><code class="hljs ebnf"><span class="hljs-attribute">ifconfig</span></code></pre><h4 id="查看端口状态（开启了哪些服务，内网IP连接等"><a href="#查看端口状态（开启了哪些服务，内网IP连接等" class="headerlink" title="查看端口状态（开启了哪些服务，内网IP连接等"></a><strong>查看端口状态（开启了哪些服务，内网IP连接等</strong></h4><pre><code class="hljs ebnf"><span class="hljs-attribute">netstat -anpt</span></code></pre><h4 id="查看进程状态（开启了哪些服务等）"><a href="#查看进程状态（开启了哪些服务等）" class="headerlink" title="查看进程状态（开启了哪些服务等）"></a><strong>查看进程状态（开启了哪些服务等）</strong></h4><pre><code class="hljs ebnf"><span class="hljs-attribute">ps -ef</span></code></pre><h4 id="查看管理员的历史输入命令（获取密码，网站目录，内网资产等信息）"><a href="#查看管理员的历史输入命令（获取密码，网站目录，内网资产等信息）" class="headerlink" title="查看管理员的历史输入命令（获取密码，网站目录，内网资产等信息）"></a><strong>查看管理员的历史输入命令（获取密码，网站目录，内网资产等信息）</strong></h4><pre><code class="hljs awk">cat <span class="hljs-regexp">/root/</span>.bash_history</code></pre><h4 id="查找某个文件（寻找配置文件等）"><a href="#查找某个文件（寻找配置文件等）" class="headerlink" title="查找某个文件（寻找配置文件等）"></a><strong>查找某个文件（寻找配置文件等）</strong></h4><pre><code class="hljs nginx"><span class="hljs-attribute">find</span> / -name <span class="hljs-regexp">*.cfg</span></code></pre><hr><h2 id="10、后渗透信息收集之wmic命令的一些使用方法"><a href="#10、后渗透信息收集之wmic命令的一些使用方法" class="headerlink" title="10、后渗透信息收集之wmic命令的一些使用方法"></a>10、后渗透信息收集之wmic命令的一些使用方法</h2><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a><strong>前言</strong></h3><p>wmic和cmd一样在所有的windows版本中都存在，同时wmic有很多cmd下不方便使用的部分，今天给大家介绍一些在后渗透过程中非常适用的使用wmic进行信息收集的命令</p><h3 id="关于wmic"><a href="#关于wmic" class="headerlink" title="关于wmic"></a><strong>关于wmic</strong></h3><p>WMI命令行（WMIC）实用程序为WMI提供了命令行界面。WMIC与现有的Shell和实用程序命令兼容。在WMIC出现之前，如果要管理WMI系统，必须使用一些专门的WMI应用，例如SMS，或者使用WMI的脚本编程API，或者使用象CIM Studio之类的工具。如果不熟悉C++之类的编程语言或VBScript之类的脚本语言，或者不掌握WMI名称空间的基本知识，要用WMI管理系统是很困难的，WMIC改变了这种情况</p><h3 id="wmic的简单使用"><a href="#wmic的简单使用" class="headerlink" title="wmic的简单使用"></a>wmic的简单使用</h3><p>首先在cmd命令行输入<code>wmic</code>进入交互式页面，这里说一下在powershell也可以和cmd命令行一样的操作<br><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/25.png" srcset="/img/loading.gif" alt="wmic的简单使用"></p><pre><code class="hljs arduino">/?				查看WMIC命令的全局选项以及命令属性等
<span class="hljs-built_in">process</span> /?		进程管理的帮助
wmic <span class="hljs-built_in">process</span> <span class="hljs-built_in">get</span> /?   属性获取操作帮助</code></pre><p>根据实际的需要去对相关的信息进行读取</p><h3 id="以进程为例展现wmic的使用"><a href="#以进程为例展现wmic的使用" class="headerlink" title="以进程为例展现wmic的使用"></a>以进程为例展现wmic的使用</h3><p>这里的靶机是<code>server 2008</code>的虚拟机，这里以查看进程为例：</p><h4 id="获取系统当前正在运行的进程等信息"><a href="#获取系统当前正在运行的进程等信息" class="headerlink" title="获取系统当前正在运行的进程等信息"></a>获取系统当前正在运行的进程等信息</h4><pre><code class="hljs arduino">wmic <span class="hljs-built_in">process</span> <span class="hljs-built_in">get</span> caption,executablepath,processid</code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/26.png" srcset="/img/loading.gif" alt="获取进程信息"></p><h4 id="查看服务进程详细信息"><a href="#查看服务进程详细信息" class="headerlink" title="查看服务进程详细信息"></a>查看服务进程详细信息</h4><pre><code class="hljs pf">wmic service where (<span class="hljs-keyword">state</span>=<span class="hljs-string">&quot;running&quot;</span>) get name ,processid ,pathname ,startmode ,caption</code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/27.png" srcset="/img/loading.gif" alt="获取进程详细信息"></p><h4 id="系统安装软件情况"><a href="#系统安装软件情况" class="headerlink" title="系统安装软件情况"></a>系统安装软件情况</h4><pre><code class="hljs applescript">wmic product <span class="hljs-keyword">get</span> <span class="hljs-built_in">name</span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/20.png" srcset="/img/loading.gif" alt="查看当前安装的程序"></p><h4 id="系统环境变量"><a href="#系统环境变量" class="headerlink" title="系统环境变量"></a>系统环境变量</h4><pre><code class="hljs routeros">wmic environment <span class="hljs-builtin-name">get</span> Description, VariableValue</code></pre><p><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/images/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/20201215_%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/28.png" srcset="/img/loading.gif" alt="查看当前安装的程序"></p><p>关于更多的信息可以通过官方的说明文档</p><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/wmic">https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/wmic</a></p><h3 id="关于powershell的Get-Wmi对象"><a href="#关于powershell的Get-Wmi对象" class="headerlink" title="关于powershell的Get-Wmi对象"></a>关于powershell的Get-Wmi对象</h3><p><code>Get-Wmi</code>是获取<code>Windows Management Instrumentation（WMI）</code>类的实例或有关可用类的信息。我们需要首先知道自己的 windows计算机支持那些可用的WMI类</p><pre><code class="hljs lsl">Get-Wmiobject -<span class="hljs-type">list</span> 	自己的windows计算机支持那些可用的WMI类</code></pre><pre><code class="hljs dsconfig"><span class="hljs-built_in">get-wmiobject</span>
<span class="hljs-built_in">get-wmiobject</span> -<span class="hljs-string">class </span><span class="hljs-string">win32_process	</span>	在本地计算机上获取进程</code></pre><p>具体的参数以及命令在官方文档中进行查询：</p><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/powershell/module/Microsoft.PowerShell.Management/Get-WmiObject?view=powershell-5.l#parameters">https://docs.microsoft.com/zh-cn/powershell/module/Microsoft.PowerShell.Management/Get-WmiObject?view=powershell-5.l#parameters</a></p><h2 id="11、内网横向常见端口"><a href="#11、内网横向常见端口" class="headerlink" title="11、内网横向常见端口"></a>11、内网横向常见端口</h2><h3 id="Port-445"><a href="#Port-445" class="headerlink" title="Port. 445"></a>Port. 445</h3><p>SMB( Server Message Block) Windows协议族，主要功能为文件打印共享服务，简单来讲就是共享文件夹</p><p>该端口也是近年来内网横向扩展中比较火的端口，大名鼎鼎的永恒之蓝漏洞就是利用该端口，操作为扫描其是否存在MS17-010漏洞。正常情况下，其命令主要是建立IPC服务中</p><h4 id="空会话"><a href="#空会话" class="headerlink" title="空会话"></a><strong>空会话</strong></h4><pre><code class="hljs apache"><span class="hljs-attribute">net</span> use \\<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.x</code></pre><h4 id="远程本地认证"><a href="#远程本地认证" class="headerlink" title="远程本地认证"></a><strong>远程本地认证</strong></h4><pre><code class="hljs sql">net <span class="hljs-keyword">use</span> \\<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.2</span> /<span class="hljs-keyword">user</span>:a\username <span class="hljs-keyword">password</span></code></pre><p>注：a/username 中 a 为工作组情况下的机器命名，可以为任意字符，例如workgroup/username</p><h4 id="域-test-local-远程认证"><a href="#域-test-local-远程认证" class="headerlink" title="域 test.local 远程认证"></a><strong>域 test.local 远程认证</strong></h4><pre><code class="hljs sql">net <span class="hljs-keyword">use</span> \\<span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.2</span> /<span class="hljs-keyword">user</span>:<span class="hljs-keyword">test</span>\username <span class="hljs-keyword">password</span></code></pre><h3 id="Port-137、138、139"><a href="#Port-137、138、139" class="headerlink" title="Port:137、138、139"></a>Port:137、138、139</h3><p>NetBios端口，137、138为UDP端口，主要用于内网传输文件，而NetBios/SMB服务的获取主要是通过139端口</p><h3 id="Port-135"><a href="#Port-135" class="headerlink" title="Port: 135"></a><strong>Port: 135</strong></h3><p>该端口主要使用<code>DCOM</code>和<code>RPC（Remote Procedure Call）</code>服务，我们利用这个端口主要做<code>WMI（Windows Management Instrumentation）</code>管理工具的远程操作</p><ul><li>使用时需要开启wmic服务</li><li>几乎所有的命令都是管理员权限</li><li>如果出现 “Invalid Globa| Switch”，需要使用双引号把该加的地方都加上</li><li>远程系统的本地安全策略的“网络访问：本地帐户的共享和安全模式”应设为“经典-本地用户以自己的身份验证”</li><li>防火墙最好是关闭状态</li></ul><h3 id="Port-53"><a href="#Port-53" class="headerlink" title="Port: 53"></a><strong>Port: 53</strong></h3><p>该端口为DNS服务端口，只要提供域名解析服务使用，该端口在渗透过程中可以寻找一下DNS域传送漏洞，在内网中可以使用DNS协议进行通信传输，隐蔽性更加好<br><strong>参考文章</strong> ：</p><h4 id="dns隧道之dns2tcp"><a href="#dns隧道之dns2tcp" class="headerlink" title="dns隧道之dns2tcp"></a>dns隧道之dns2tcp</h4><ul><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/gsls200808/article/details/50318947">https://blog.csdn.net/gsls200808/article/details/50318947</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/deng_xj/article/details/88834124">https://blog.csdn.net/deng_xj/article/details/88834124</a></li></ul><h4 id="dns隧道之unseat2"><a href="#dns隧道之unseat2" class="headerlink" title="dns隧道之unseat2"></a>dns隧道之unseat2</h4><ul><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/bonelee/p/7927706.html">https://www.cnblogs.com/bonelee/p/7927706.html</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/ddr12231/article/details/102306989">https://blog.csdn.net/ddr12231/article/details/102306989</a></li></ul><h3 id="Port-389"><a href="#Port-389" class="headerlink" title="Port: 389"></a><strong>Port: 389</strong></h3><p>用于LADP（轻量级目录访问协议），属于TCP/IP协议，在域过程中一般出现在域控上出现该端口，进行权限认证服务，如果拥有对该域的用户，且担心net或者其他爆破方法不可行的情况，可以尝试使用LADP端口进行爆破</p><p>工具可以使用类似于hydra等开源项目</p><h3 id="Port-88"><a href="#Port-88" class="headerlink" title="Port: 88"></a><strong>Port: 88</strong></h3><p>该端口主要开启Kerberos服务，属于TCP/IP协议，主要任务是监听KDC的票据请求，该协议在渗透过程中可以进行黄金票据和白银票据的伪造，以横向扩展某些服务</p><h3 id="Port-5985"><a href="#Port-5985" class="headerlink" title="Port: 5985"></a><strong>Port: 5985</strong></h3><p>该端口主要介绍WinRM服务，WinRM是Windows对WS-Management的实现，WinRM允许远程用户使用工具和脚本对Windows服务器进行管理并获取数据。并且WinRM服务自Windows Vista开始成为Windows的默认组件</p><p>条件:</p><ul><li>Windows Vista上必须手动启动，而Windows Server 2008 中服务是默认开启的</li><li>服务在后台开启，但是端口还没有开启监听，所以需要开启端口</li><li>使用 winrm quickconfig 对winRM进行配置，开启HTTP和HTTPSS监听，且需要开启防火墙</li></ul></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/">红队攻防</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/%E7%BA%A2%E9%98%9F%E6%94%BB%E9%98%B2/">红队攻防</a> <a class="hover-with-bg" href="/tags/%E6%B8%97%E9%80%8F%E6%94%BB%E5%87%BB%E7%BA%A2%E9%98%9F%E7%99%BE%E7%A7%91%E5%85%A8%E4%B9%A6/">渗透攻击红队百科全书</a></div></div><p class="note note-warning"><strong>本文作者: </strong><a href="/">iceH</a><br><strong>本文链接: </strong><a href="http://www.secice.cn/p/a184e79">http://www.secice.cn/p/a184e79</a><br><strong>版权声明: </strong>本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p><div class="post-prevnext row"><article class="post-prev col-6"><a href="/p/28ca3946"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">红队攻防学习之打点进内网</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/p/c92f138d"><span class="hidden-mobile">我是如何破解学校一慧通的</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article class="comments" id="comments"><div id="vcomments"></div><script type="text/javascript">Fluid.utils.waitElementVisible("vcomments",(function(){Fluid.utils.createScript("https://cdn.staticfile.org/valine/1.4.14/Valine.min.js",(function(){new Valine({el:"#vcomments",app_id:"MnjV8raNBztIVGGKiicFL3Sq-MdYXbMMI",app_key:"hS70MmgmzDqbMSkSAfkDe42h",placeholder:"留下你的小脚印吧...",path:window.location.pathname,avatar:"wavatar",meta:["nick","mail"],pageSize:"10",lang:"zh-CN",highlight:!1,recordIP:!1,serverURLs:""})}))}))</script><noscript>Please enable JavaScript to view the <a target="_blank" href="https://valine.js.org" rel="nofollow noopener noopener">comments powered by Valine.</a></noscript></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><div class="col-lg-7 mx-auto nopadding-md"><div class="container custom post-custom mx-auto"><img src="https://cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/img/psb.gif" srcset="/img/loading.gif" class="rounded mx-auto d-block mt-5" style="width:300px;height:150px"></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><span>iceH</span> <i class="iconfont icon-love"></i> <span>一条啥也不会的咸鱼！</span></div></footer><script src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:200}),NProgress.start(),document.addEventListener("DOMContentLoaded",(function(){window.NProgress&&window.NProgress.inc()})),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/js/bootstrap.min.js"></script><script src="/js/debouncer.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/lazyload.js"></script><script src="https://cdn.staticfile.org/tocbot/4.12.0/tocbot.min.js"></script><script src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js"></script><script src="https://cdn.staticfile.org/anchor-js/4.3.0/anchor.min.js"></script><script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js"></script><script src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script src="/js/local-search.js"></script><script>document.querySelector("#local-search-input").onclick=function(){searchFunc("/local-search.xml","local-search-input","local-search-result"),this.onclick=null}</script><script src="//cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/js/qipao.js"></script><script src="//cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/js/jingtaisidai.js"></script><script src="//cdn.jsdelivr.net/gh/root-iceH/root-iceH.github.io/js/dianjichuzi.js"></script><script src="//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="//cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="/js/boot.js"></script></body></html>